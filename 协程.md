# 协程

## 1.介绍简介

协程，又称微线程，纤程，英文名：coroutine。是一种多任务并发的操作手段。协程是运行在单线程中的并发程序。

## 2.技术解决方案

Epoll(event loop) + NonBlocking IO + 网络IO Hooking + 协程管理（协程调度器，进行上下文切换）。

## 3.协程用语

- co_create: 创建协程
- co_resume: 执行协程
- co_yield:挂起协程
- co_release:释放协程
- co_cond_timewait:挂起当前协程直到获取协程条件变量或超时
- co_cond_signal:唤醒等待协程条件变量的一个协程
- co_cond_broadcast: 唤醒等待协程条件变量的全部协程

## 4.协程应用场景与优势

- 适合**网络IO密集型服务，并且后端服务的耗时远大于当前业务逻辑的耗时**。不适用于CPU密集型服务和重磁盘IO的服务。
- 适合**一问一答**的消息处理模型，将同步阻塞的逻辑改造成异步非阻塞的逻辑（写着同步逻辑的代码享受异步的代码效率）。
- 协程在用户态进行切换，大大减少内核调度的性能消耗。

